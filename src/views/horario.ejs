<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horario - LearnStudyHub</title>
    <link rel="icon" type="image/png" href="/images/logo_sin_fondo.png">
    <link rel="stylesheet" href="/views/css/layout.css">
    <link rel="stylesheet" href="/views/css/horario.css">
</head>
<body>
    <%- include('partials/_sidebar') %>
    <%- include('partials/_header') %>
    <% if(mensaje){ %>
            <div id="no-courses-msg" class="no-courses-card">
                <div class="card-icon">
                    <i data-lucide="graduation-cap"></i>
                </div>
                <h2 class="card-title">Sin cursos inscritos</h2>
                <p class="card-text">
                    No se encontraron registros para este período. 
                    <strong>Debe inscribir cursos en este lapso académico para cargar horarios.</strong>
                </p>
                <div class="card-footer-line"></div>
            </div>
    <% }else { %>
        <div class="container main-layout">
            <div class="sidebar-container">
                <header>
                    <h1>Horario Academico</h1>
                    <div class="warning-banner">
                        <i data-lucide="alert-triangle"></i>
                        <div class="warning-content">
                            <strong>IMPORTANTE:</strong>
                            <p>Recuerda guardar tu horario antes de salir de la página</p>
                        </div>
                    </div>
                </header>
                
                <div class="form-container">
                    <h2>Agregar Cursos</h2>
                    <p class="form-description">Ingresa los detalles del curso para actualizar tu horario.</p>
                    
                    <div class="form-group">
                        <label for="subject">Asignatura</label>
                        <div class="select-wrapper">
                            <select id="subject">
                                <option value="" disabled selected>Seleccionar asignatura...</option>
                                </select>
                            <i data-lucide="chevron-down" class="select-icon"></i>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="day">Dia</label>
                            <div class="select-wrapper">
                                <select id="day">
                                    <option value="lunes">Lunes</option>
                                    <option value="martes">Martes</option>
                                    <option value="miércoles">Miércoles</option>
                                    <option value="jueves">Jueves</option>
                                    <option value="viernes">Viernes</option>
                                    <option value="sábado">Sábado</option>
                                </select>
                                <i data-lucide="chevron-down" class="select-icon"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="classroom">Aula</label>
                            <input type="text" id="classroom" placeholder="Ej. I-10">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="start-time">Hora Inicio</label>
                            <div class="select-wrapper">
                                <select id="start-time">
                                    </select>
                                <i data-lucide="clock" class="select-icon"></i>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="end-time">Hora Final</label>
                            <div class="select-wrapper">
                                <select id="end-time">
                                    </select>
                                <i data-lucide="clock" class="select-icon"></i>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn-add" id="add-btn">+ Agregar</button>
                    <button class="btn-guardar" id="btn-guardar" type="button">
                        <i data-lucide="save"></i>Guardar Horario</button>
                    <button class="btn-danger" id="btn-delete-all" type="button">
                        <i data-lucide="trash-2"></i>Borrar Horario
                    </button>
                </div>
            </div>
            
            <div class="schedule-container main-schedule-area">
                <h2>Mi Horario</h2>
                <p class="schedule-subtitle">Gestiona tus clases semanales.</p>
                
                <div class="schedule-grid">
                    <div class="day-column">
                        <h3 class="day-header">LUNES</h3>
                        <div class="day-classes-container" id="col-lunes">
                            </div>
                    </div>

                    <div class="day-column">
                        <h3 class="day-header">MARTES</h3>
                        <div class="day-classes-container" id="col-martes"></div>
                    </div>

                    <div class="day-column">
                        <h3 class="day-header">MIERCOLES</h3>
                        <div class="day-classes-container" id="col-miércoles"></div>
                    </div>

                    <div class="day-column">
                        <h3 class="day-header">JUEVES</h3>
                        <div class="day-classes-container" id="col-jueves"></div>
                    </div>

                    <div class="day-column">
                        <h3 class="day-header">VIERNES</h3>
                        <div class="day-classes-container" id="col-viernes"></div>
                    </div>
                    <div class="day-column">
                        <h3 class="day-header">SABADO</h3>
                        <div class="day-classes-container" id="col-sábado"></div>
                    </div>
                </div>
            </div>
        </div>
        <%- include('partials/_footer') %>
        <script>
            const materiasConIDs = <%- JSON.stringify(materias) %>;
            const initialScheduleData = <%- JSON.stringify(horarios) %>;
        </script>
    <% } %>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="/views/javascript/horario.js" ></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            // Inicializar iconos de Lucide
            if (typeof lucide !== "undefined") {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>