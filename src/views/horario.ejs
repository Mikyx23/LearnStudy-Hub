<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horario - LearnStudyHub</title>
    <link rel="stylesheet" href="/views/css/layout.css">
    <link rel="stylesheet" href="/views/css/horario.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="/views/javascript/layout.js" ></script>
</head>
<body>
    <% if(mensaje){ %>
            <div id="no-courses-msg" class="no-courses-card">
                <div class="card-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <h2 class="card-title">Sin cursos inscritos</h2>
                <p class="card-text">
                    No se encontraron registros para este período. 
                    <strong>Debe inscribir cursos en este lapso académico para cargar horarios.</strong>
                </p>
                <div class="card-footer-line"></div>
            </div>
    <% }else { %>
    <div class="container">
        <header>
            <h1>Horario Académico</h1>
            <p class="instructions"> <i data-lucide="triangle-alert"></i> <strong>IMPORTANTE:</strong> Recuerda guardar tu horario antes de salir de la pagina</p>
        </header>
        
        <div class="app-container">
            <div class="form-container">
                <h2>Agregar Nueva Clase</h2>
                <div class="form-group">
                    <label for="subject">MATERIA</label>
                    <select id="subject">
                        <option value="" disabled selected>Seleccionar materia...</option>
                        <!-- Las opciones se generarán dinámicamente con JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="day">DÍA</label>
                    <select id="day">
                        <option value="lunes">Lunes</option>
                        <option value="martes">Martes</option>
                        <option value="miércoles">Miércoles</option>
                        <option value="jueves">Jueves</option>
                        <option value="viernes">Viernes</option>
                        <option value="sábado">Sábado</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="start-time">HORA DE INICIO</label>
                    <select id="start-time">
                        <!-- Las horas se generarán dinámicamente con JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="end-time">HORA DE FINALIZACIÓN</label>
                    <select id="end-time">
                        <!-- Las horas se generarán dinámicamente con JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="classroom">AULA</label>
                    <input type="text" id="classroom" placeholder="Ej. A-204">
                </div>
                
                <button class="btn-add" id="add-btn">+ Agregar</button>
                <button class="btn-guardar" id="btn-guardar" type="button">Guardar Horario</button>
            </div>
            
            <div class="schedule-container">
                <h2>Horario Semanal</h2>
                <div id="schedule-table">
                    <!-- La tabla se generará dinámicamente con JavaScript -->
                </div>
            </div>
        </div>
    </div>
    
    <script>
        const materiasConIDs = <%- JSON.stringify(materias) %>;
        const initialScheduleData = <%- JSON.stringify(horarios) %>;
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="/views/javascript/horario.js" ></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            setTimeout(() => {
                if (typeof lucide !== "undefined") {
                    lucide.createIcons();
                }
            }, 100);
        });
    </script>
    <% } %>
</body>
</html>